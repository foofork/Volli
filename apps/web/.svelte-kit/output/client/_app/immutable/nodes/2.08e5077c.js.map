{"version":3,"file":"2.08e5077c.js","sources":["../../../../../../src/routes/app/+layout.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { goto } from '$app/navigation';\n\timport { onMount } from 'svelte';\n\timport { auth, isAuthenticated } from '$lib/stores/auth';\n\timport { vault } from '$lib/stores/vault';\n\timport { messages } from '$lib/stores/messages';\n\t\n\tlet isReady = false;\n\t\n\tonMount(async () => {\n\t\t// Initialize auth\n\t\tawait auth.initialize();\n\t\t\n\t\t// Check authentication\n\t\tconst unsubscribe = isAuthenticated.subscribe(async (authenticated) => {\n\t\t\tif (!authenticated) {\n\t\t\t\tgoto('/auth');\n\t\t\t} else {\n\t\t\t\t// Initialize vault and load data\n\t\t\t\tawait vault.initialize();\n\t\t\t\tif ($vault.isUnlocked) {\n\t\t\t\t\tawait messages.loadConversations();\n\t\t\t\t}\n\t\t\t\tisReady = true;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn unsubscribe;\n\t});\n\t\n\tasync function handleLogout() {\n\t\tawait vault.lock();\n\t\tawait auth.logout();\n\t\tgoto('/');\n\t}\n</script>\n\n{#if isReady}\n\t<div class=\"app-layout\">\n\t\t<aside class=\"sidebar\">\n\t\t\t<div class=\"sidebar-header\">\n\t\t\t\t<h1>üîê Volli</h1>\n\t\t\t\t<button class=\"icon-button\" title=\"New conversation\">\n\t\t\t\t\t<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n\t\t\t\t\t\t<path d=\"M10 4v12M4 10h12\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t\n\t\t\t<nav class=\"nav-menu\">\n\t\t\t\t<a href=\"/app\" class=\"nav-item\" class:active={true}>\n\t\t\t\t\t<span class=\"icon\">üí¨</span>\n\t\t\t\t\t<span>Messages</span>\n\t\t\t\t</a>\n\t\t\t\t<a href=\"/app/contacts\" class=\"nav-item\">\n\t\t\t\t\t<span class=\"icon\">üë•</span>\n\t\t\t\t\t<span>Contacts</span>\n\t\t\t\t</a>\n\t\t\t\t<a href=\"/app/files\" class=\"nav-item\">\n\t\t\t\t\t<span class=\"icon\">üìÅ</span>\n\t\t\t\t\t<span>Files</span>\n\t\t\t\t</a>\n\t\t\t\t<a href=\"/app/settings\" class=\"nav-item\">\n\t\t\t\t\t<span class=\"icon\">‚öôÔ∏è</span>\n\t\t\t\t\t<span>Settings</span>\n\t\t\t\t</a>\n\t\t\t</nav>\n\t\t\t\n\t\t\t<div class=\"sidebar-footer\">\n\t\t\t\t<div class=\"user-info\">\n\t\t\t\t\t<div class=\"avatar\">üë§</div>\n\t\t\t\t\t<div class=\"user-details\">\n\t\t\t\t\t\t<div class=\"user-name\">{$auth.identity?.id.slice(0, 8)}</div>\n\t\t\t\t\t\t<div class=\"user-status\">üü¢ Secure</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button class=\"icon-button\" on:click={handleLogout} title=\"Logout\">\n\t\t\t\t\t<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n\t\t\t\t\t\t<path d=\"M7 3H4a1 1 0 00-1 1v12a1 1 0 001 1h3M14 10l3-3m0 0l-3-3m3 3H7\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</aside>\n\t\t\n\t\t<main class=\"main-content\">\n\t\t\t<slot />\n\t\t</main>\n\t</div>\n{:else}\n\t<div class=\"loading\">\n\t\t<div class=\"spinner\"></div>\n\t\t<p>Initializing secure environment...</p>\n\t</div>\n{/if}\n\n<style>\n\t.app-layout {\n\t\tdisplay: flex;\n\t\theight: 100vh;\n\t\tbackground: #0a0a0a;\n\t\tcolor: #fff;\n\t}\n\t\n\t.sidebar {\n\t\twidth: 280px;\n\t\tbackground: rgba(255, 255, 255, 0.03);\n\t\tborder-right: 1px solid rgba(255, 255, 255, 0.1);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\t\n\t.sidebar-header {\n\t\tpadding: 1.5rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tborder-bottom: 1px solid rgba(255, 255, 255, 0.1);\n\t}\n\t\n\t.sidebar-header h1 {\n\t\tfont-size: 1.5rem;\n\t\tmargin: 0;\n\t\tbackground: linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%);\n\t\t-webkit-background-clip: text;\n\t\t-webkit-text-fill-color: transparent;\n\t\tbackground-clip: text;\n\t}\n\t\n\t.icon-button {\n\t\twidth: 36px;\n\t\theight: 36px;\n\t\tborder-radius: 8px;\n\t\tborder: none;\n\t\tbackground: rgba(255, 255, 255, 0.05);\n\t\tcolor: #fff;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.3s ease;\n\t}\n\t\n\t.icon-button:hover {\n\t\tbackground: rgba(255, 255, 255, 0.1);\n\t}\n\t\n\t.nav-menu {\n\t\tflex: 1;\n\t\tpadding: 1rem 0;\n\t\toverflow-y: auto;\n\t}\n\t\n\t.nav-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tpadding: 0.75rem 1.5rem;\n\t\tcolor: #aaa;\n\t\ttext-decoration: none;\n\t\ttransition: all 0.3s ease;\n\t\tposition: relative;\n\t}\n\t\n\t.nav-item:hover {\n\t\tcolor: #fff;\n\t\tbackground: rgba(255, 255, 255, 0.05);\n\t}\n\t\n\t.nav-item.active {\n\t\tcolor: #3B82F6;\n\t\tbackground: rgba(59, 130, 246, 0.1);\n\t}\n\t\n\t.nav-item.active::before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\twidth: 3px;\n\t\tbackground: #3B82F6;\n\t}\n\t\n\t.nav-item .icon {\n\t\tfont-size: 1.25rem;\n\t}\n\t\n\t.sidebar-footer {\n\t\tpadding: 1rem;\n\t\tborder-top: 1px solid rgba(255, 255, 255, 0.1);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.5rem;\n\t}\n\t\n\t.user-info {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t}\n\t\n\t.avatar {\n\t\twidth: 40px;\n\t\theight: 40px;\n\t\tborder-radius: 50%;\n\t\tbackground: rgba(255, 255, 255, 0.1);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: 1.25rem;\n\t}\n\t\n\t.user-details {\n\t\tflex: 1;\n\t}\n\t\n\t.user-name {\n\t\tfont-weight: 600;\n\t\tfont-size: 0.9rem;\n\t}\n\t\n\t.user-status {\n\t\tfont-size: 0.8rem;\n\t\tcolor: #4ADE80;\n\t}\n\t\n\t.main-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\t\n\t.loading {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\theight: 100vh;\n\t\tgap: 1.5rem;\n\t}\n\t\n\t.spinner {\n\t\twidth: 48px;\n\t\theight: 48px;\n\t\tborder: 3px solid rgba(255, 255, 255, 0.1);\n\t\tborder-top-color: #3B82F6;\n\t\tborder-radius: 50%;\n\t\tanimation: spin 1s linear infinite;\n\t}\n\t\n\t@keyframes spin {\n\t\tto { transform: rotate(360deg); }\n\t}\n\t\n\t.loading p {\n\t\tcolor: #888;\n\t\tfont-size: 1.1rem;\n\t}\n\t\n\t@media (max-width: 768px) {\n\t\t.sidebar {\n\t\t\twidth: 80px;\n\t\t}\n\t\t\n\t\t.sidebar-header h1 {\n\t\t\tdisplay: none;\n\t\t}\n\t\t\n\t\t.nav-item span:not(.icon) {\n\t\t\tdisplay: none;\n\t\t}\n\t\t\n\t\t.user-details {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n</style>"],"names":["insert_hydration","target","div1","anchor","ctx","div7","append_hydration","aside","div0","nav","a0","a1","a2","a3","div6","div5","div4","div2","div3","button1","main","set_data","t21","t21_value","isReady","onMount","auth","isAuthenticated","authenticated","vault","$vault","messages","$$invalidate","goto","handleLogout"],"mappings":"o1BAyFCA,GAGKC,EAAAC,EAAAC,CAAA,kvBApBwBC,EAAK,CAAA,EAAC,UAAU,GAAG,MAAM,EAAG,CAAC,EAAA,g/DAtBT,EAAI,wqBAZrDJ,GAiDKC,EAAAI,EAAAF,CAAA,EAhDJG,EA2COD,EAAAE,CAAA,EA1CND,EAOKC,EAAAC,CAAA,SAELF,EAiBKC,EAAAE,CAAA,EAhBJH,EAGGG,EAAAC,CAAA,SACHJ,EAGGG,EAAAE,CAAA,SACHL,EAGGG,EAAAG,CAAA,SACHN,EAGGG,EAAAI,CAAA,SAGJP,EAaKC,EAAAO,CAAA,EAZJR,EAMKQ,EAAAC,CAAA,EALJT,EAA2BS,EAAAb,CAAA,SAC3BI,EAGKS,EAAAC,CAAA,EAFJV,EAA4DU,EAAAC,CAAA,gBAC5DX,EAAuCU,EAAAE,CAAA,SAGzCZ,EAIQQ,EAAAK,CAAA,SAIVb,EAEMD,EAAAe,CAAA,0CAVkChB,EAAY,CAAA,CAAA,kCAJxBA,EAAK,CAAA,EAAC,UAAU,GAAG,MAAM,EAAG,CAAC,EAAA,KAAAiB,GAAAC,EAAAC,CAAA,2NAnCtDnB,EAAO,CAAA,EAAA,maA9BPoB,EAAU,GAEdC,GAAO,UAEA,MAAAC,EAAK,aAGSC,GAAgB,gBAAiBC,GAAa,CAC5DA,GAIE,MAAAC,EAAM,aACRC,EAAO,YACJ,MAAAC,GAAS,oBAEhBC,EAAA,EAAAR,EAAU,EAAI,GAPdS,GAAK,OAAO,qBAcAC,GAAY,CACpB,MAAAL,EAAM,OACN,MAAAH,EAAK,SACXO,GAAK,GAAG"}