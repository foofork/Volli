{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../src/routes/app/settings/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { auth } from '$lib/stores/auth';\n\timport { vault } from '$lib/stores/vault';\n\t\n\tlet exportData = false;\n\tlet changePassphrase = false;\n\tlet newPassphrase = '';\n\tlet confirmPassphrase = '';\n\tlet error = '';\n\tlet success = '';\n\t\n\tasync function handleExportData() {\n\t\ttry {\n\t\t\tconst data = {\n\t\t\t\tidentity: $auth.identity,\n\t\t\t\tdevice: $auth.device,\n\t\t\t\texportedAt: new Date().toISOString()\n\t\t\t};\n\t\t\t\n\t\t\tconst blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = url;\n\t\t\ta.download = `volli-export-${Date.now()}.json`;\n\t\t\ta.click();\n\t\t\tURL.revokeObjectURL(url);\n\t\t\t\n\t\t\tsuccess = 'Data exported successfully';\n\t\t\tsetTimeout(() => success = '', 3000);\n\t\t} catch (err) {\n\t\t\terror = 'Failed to export data';\n\t\t}\n\t}\n\t\n\tasync function handleChangePassphrase() {\n\t\terror = '';\n\t\t\n\t\tif (!newPassphrase || !confirmPassphrase) {\n\t\t\terror = 'Please fill in all fields';\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (newPassphrase !== confirmPassphrase) {\n\t\t\terror = 'Passphrases do not match';\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (newPassphrase.length < 8) {\n\t\t\terror = 'Passphrase must be at least 8 characters';\n\t\t\treturn;\n\t\t}\n\t\t\n\t\ttry {\n\t\t\t// Re-encrypt vault with new passphrase\n\t\t\tawait vault.lock();\n\t\t\tawait vault.unlock(newPassphrase);\n\t\t\t\n\t\t\tsuccess = 'Passphrase changed successfully';\n\t\t\tchangePassphrase = false;\n\t\t\tnewPassphrase = '';\n\t\t\tconfirmPassphrase = '';\n\t\t\tsetTimeout(() => success = '', 3000);\n\t\t} catch (err) {\n\t\t\terror = 'Failed to change passphrase';\n\t\t}\n\t}\n</script>\n\n<div class=\"settings\">\n\t<div class=\"settings-header\">\n\t\t<h1>Settings</h1>\n\t</div>\n\t\n\t<div class=\"settings-content\">\n\t\t{#if error}\n\t\t\t<div class=\"alert error\">{error}</div>\n\t\t{/if}\n\t\t\n\t\t{#if success}\n\t\t\t<div class=\"alert success\">{success}</div>\n\t\t{/if}\n\t\t\n\t\t<section class=\"settings-section\">\n\t\t\t<h2>üîê Security</h2>\n\t\t\t\n\t\t\t<div class=\"setting-item\">\n\t\t\t\t<div class=\"setting-info\">\n\t\t\t\t\t<h3>Change Vault Passphrase</h3>\n\t\t\t\t\t<p>Update the passphrase used to encrypt your local vault</p>\n\t\t\t\t</div>\n\t\t\t\t<button class=\"secondary\" on:click={() => changePassphrase = !changePassphrase}>\n\t\t\t\t\tChange Passphrase\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t\n\t\t\t{#if changePassphrase}\n\t\t\t\t<form class=\"passphrase-form\" on:submit|preventDefault={handleChangePassphrase}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tbind:value={newPassphrase}\n\t\t\t\t\t\tplaceholder=\"New passphrase\"\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tbind:value={confirmPassphrase}\n\t\t\t\t\t\tplaceholder=\"Confirm passphrase\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"form-actions\">\n\t\t\t\t\t\t<button type=\"submit\" class=\"primary\">Update Passphrase</button>\n\t\t\t\t\t\t<button type=\"button\" class=\"secondary\" on:click={() => changePassphrase = false}>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t{/if}\n\t\t\t\n\t\t\t<div class=\"setting-item\">\n\t\t\t\t<div class=\"setting-info\">\n\t\t\t\t\t<h3>Two-Factor Authentication</h3>\n\t\t\t\t\t<p>Add an extra layer of security to your account</p>\n\t\t\t\t</div>\n\t\t\t\t<button class=\"secondary\" disabled>Coming Soon</button>\n\t\t\t</div>\n\t\t</section>\n\t\t\n\t\t<section class=\"settings-section\">\n\t\t\t<h2>üìä Data Management</h2>\n\t\t\t\n\t\t\t<div class=\"setting-item\">\n\t\t\t\t<div class=\"setting-info\">\n\t\t\t\t\t<h3>Export Your Data</h3>\n\t\t\t\t\t<p>Download all your data in JSON format</p>\n\t\t\t\t</div>\n\t\t\t\t<button class=\"secondary\" on:click={handleExportData}>\n\t\t\t\t\tExport Data\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"setting-item\">\n\t\t\t\t<div class=\"setting-info\">\n\t\t\t\t\t<h3>Clear Local Data</h3>\n\t\t\t\t\t<p>Remove all data from this device (irreversible)</p>\n\t\t\t\t</div>\n\t\t\t\t<button class=\"danger\" on:click={() => confirm('Are you sure?') && auth.logout()}>\n\t\t\t\t\tClear Data\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</section>\n\t\t\n\t\t<section class=\"settings-section\">\n\t\t\t<h2>üé® Appearance</h2>\n\t\t\t\n\t\t\t<div class=\"setting-item\">\n\t\t\t\t<div class=\"setting-info\">\n\t\t\t\t\t<h3>Theme</h3>\n\t\t\t\t\t<p>Choose your preferred color scheme</p>\n\t\t\t\t</div>\n\t\t\t\t<select disabled>\n\t\t\t\t\t<option>Dark (Default)</option>\n\t\t\t\t\t<option>Light</option>\n\t\t\t\t\t<option>Auto</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</section>\n\t\t\n\t\t<section class=\"settings-section\">\n\t\t\t<h2>‚ÑπÔ∏è About</h2>\n\t\t\t\n\t\t\t<div class=\"info-grid\">\n\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t<span class=\"label\">Version</span>\n\t\t\t\t\t<span class=\"value\">0.1.0</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t<span class=\"label\">Encryption</span>\n\t\t\t\t\t<span class=\"value\">Post-Quantum (Kyber/Dilithium)</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t<span class=\"label\">Storage</span>\n\t\t\t\t\t<span class=\"value\">Local-first (SQLite)</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t<span class=\"label\">Identity</span>\n\t\t\t\t\t<span class=\"value\">{$auth.identity?.id.slice(0, 12)}...</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t</div>\n</div>\n\n<style>\n\t.settings {\n\t\theight: 100%;\n\t\toverflow-y: auto;\n\t\tbackground: #0a0a0a;\n\t}\n\t\n\t.settings-header {\n\t\tpadding: 2rem;\n\t\tborder-bottom: 1px solid rgba(255, 255, 255, 0.1);\n\t\tbackground: rgba(255, 255, 255, 0.02);\n\t}\n\t\n\t.settings-header h1 {\n\t\tmargin: 0;\n\t\tfont-size: 2rem;\n\t\tcolor: #fff;\n\t}\n\t\n\t.settings-content {\n\t\tmax-width: 800px;\n\t\tmargin: 0 auto;\n\t\tpadding: 2rem;\n\t}\n\t\n\t.settings-section {\n\t\tmargin-bottom: 3rem;\n\t}\n\t\n\t.settings-section h2 {\n\t\tmargin: 0 0 1.5rem;\n\t\tfont-size: 1.5rem;\n\t\tcolor: #fff;\n\t}\n\t\n\t.setting-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 1.5rem;\n\t\tbackground: rgba(255, 255, 255, 0.03);\n\t\tborder: 1px solid rgba(255, 255, 255, 0.1);\n\t\tborder-radius: 12px;\n\t\tmargin-bottom: 1rem;\n\t}\n\t\n\t.setting-info {\n\t\tflex: 1;\n\t}\n\t\n\t.setting-info h3 {\n\t\tmargin: 0 0 0.5rem;\n\t\tfont-size: 1.1rem;\n\t\tcolor: #fff;\n\t}\n\t\n\t.setting-info p {\n\t\tmargin: 0;\n\t\tcolor: #888;\n\t\tfont-size: 0.95rem;\n\t}\n\t\n\tbutton {\n\t\tpadding: 0.75rem 1.5rem;\n\t\tborder: none;\n\t\tborder-radius: 8px;\n\t\tfont-weight: 600;\n\t\tcursor: pointer;\n\t\ttransition: all 0.3s ease;\n\t}\n\t\n\tbutton.primary {\n\t\tbackground: #3B82F6;\n\t\tcolor: white;\n\t}\n\t\n\tbutton.primary:hover {\n\t\tbackground: #2563EB;\n\t}\n\t\n\tbutton.secondary {\n\t\tbackground: rgba(255, 255, 255, 0.1);\n\t\tcolor: #fff;\n\t\tborder: 1px solid rgba(255, 255, 255, 0.2);\n\t}\n\t\n\tbutton.secondary:hover:not(:disabled) {\n\t\tbackground: rgba(255, 255, 255, 0.15);\n\t}\n\t\n\tbutton.danger {\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tcolor: #EF4444;\n\t\tborder: 1px solid rgba(239, 68, 68, 0.3);\n\t}\n\t\n\tbutton.danger:hover {\n\t\tbackground: rgba(239, 68, 68, 0.2);\n\t}\n\t\n\tbutton:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\t\n\tselect {\n\t\tpadding: 0.75rem 1rem;\n\t\tbackground: rgba(255, 255, 255, 0.05);\n\t\tborder: 1px solid rgba(255, 255, 255, 0.1);\n\t\tborder-radius: 8px;\n\t\tcolor: #fff;\n\t\tcursor: pointer;\n\t}\n\t\n\tselect:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\t\n\t.passphrase-form {\n\t\tmargin-top: 1rem;\n\t\tpadding: 1.5rem;\n\t\tbackground: rgba(255, 255, 255, 0.02);\n\t\tborder: 1px solid rgba(255, 255, 255, 0.1);\n\t\tborder-radius: 8px;\n\t}\n\t\n\t.passphrase-form input {\n\t\twidth: 100%;\n\t\tpadding: 0.75rem;\n\t\tmargin-bottom: 1rem;\n\t\tbackground: rgba(255, 255, 255, 0.05);\n\t\tborder: 1px solid rgba(255, 255, 255, 0.1);\n\t\tborder-radius: 6px;\n\t\tcolor: #fff;\n\t}\n\t\n\t.form-actions {\n\t\tdisplay: flex;\n\t\tgap: 1rem;\n\t}\n\t\n\t.alert {\n\t\tpadding: 1rem;\n\t\tborder-radius: 8px;\n\t\tmargin-bottom: 1.5rem;\n\t\tfont-weight: 500;\n\t}\n\t\n\t.alert.error {\n\t\tbackground: rgba(239, 68, 68, 0.1);\n\t\tborder: 1px solid rgba(239, 68, 68, 0.3);\n\t\tcolor: #EF4444;\n\t}\n\t\n\t.alert.success {\n\t\tbackground: rgba(34, 197, 94, 0.1);\n\t\tborder: 1px solid rgba(34, 197, 94, 0.3);\n\t\tcolor: #22C55E;\n\t}\n\t\n\t.info-grid {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n\t\tgap: 1rem;\n\t\tpadding: 1rem;\n\t\tbackground: rgba(255, 255, 255, 0.03);\n\t\tborder: 1px solid rgba(255, 255, 255, 0.1);\n\t\tborder-radius: 12px;\n\t}\n\t\n\t.info-item {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.5rem;\n\t}\n\t\n\t.info-item .label {\n\t\tfont-size: 0.9rem;\n\t\tcolor: #888;\n\t}\n\t\n\t.info-item .value {\n\t\tfont-weight: 600;\n\t\tcolor: #fff;\n\t}\n\t\n\t@media (max-width: 768px) {\n\t\t.settings-content {\n\t\t\tpadding: 1rem;\n\t\t}\n\t\t\n\t\t.setting-item {\n\t\t\tflex-direction: column;\n\t\t\talign-items: flex-start;\n\t\t\tgap: 1rem;\n\t\t}\n\t\t\n\t\t.form-actions {\n\t\t\tflex-direction: column;\n\t\t}\n\t\t\n\t\tbutton {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n</style>"],"names":[],"mappings":";;;;;;;;;;;;qwGAuL0B,MAAM,UAAU,GAAG,MAAM,GAAG,EAAE,CAAA,CAAA;;"}