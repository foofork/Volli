import { c as create_ssr_component, a as subscribe, b as add_attribute, e as escape, d as each } from "../../../chunks/ssr.js";
import { a as activeConversation, v as vault, m as messages, b as activeMessages } from "../../../chunks/messages.js";
const _page_svelte_svelte_type_style_lang = "";
const css = {
  code: ".messages-layout.svelte-wfhbxs.svelte-wfhbxs{display:flex;height:100%;background:#0a0a0a}.unlock-container.svelte-wfhbxs.svelte-wfhbxs{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.unlock-card.svelte-wfhbxs.svelte-wfhbxs{width:100%;max-width:400px;background:rgba(255, 255, 255, 0.05);border:1px solid rgba(255, 255, 255, 0.1);border-radius:16px;padding:2rem}.unlock-card.svelte-wfhbxs h2.svelte-wfhbxs{margin:0 0 0.5rem;color:#fff}.unlock-card.svelte-wfhbxs p.svelte-wfhbxs{color:#888;margin-bottom:2rem}.unlock-card.svelte-wfhbxs input.svelte-wfhbxs{width:100%;padding:0.75rem;background:rgba(255, 255, 255, 0.05);border:1px solid rgba(255, 255, 255, 0.1);border-radius:8px;color:#fff;margin-bottom:1rem}.unlock-card.svelte-wfhbxs button.svelte-wfhbxs{width:100%;padding:0.75rem;background:#3B82F6;color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s ease}.unlock-card.svelte-wfhbxs button.svelte-wfhbxs:hover:not(:disabled){background:#2563EB}.unlock-card.svelte-wfhbxs button.svelte-wfhbxs:disabled{opacity:0.7;cursor:not-allowed}.error.svelte-wfhbxs.svelte-wfhbxs{background:rgba(239, 68, 68, 0.1);border:1px solid rgba(239, 68, 68, 0.3);color:#EF4444;padding:0.5rem;border-radius:6px;margin-bottom:1rem;font-size:0.9rem}.conversation-list.svelte-wfhbxs.svelte-wfhbxs{width:320px;border-right:1px solid rgba(255, 255, 255, 0.1);display:flex;flex-direction:column}.list-header.svelte-wfhbxs.svelte-wfhbxs{padding:1.5rem;border-bottom:1px solid rgba(255, 255, 255, 0.1);display:flex;align-items:center;justify-content:space-between}.list-header.svelte-wfhbxs h2.svelte-wfhbxs{margin:0;font-size:1.25rem;color:#fff}.new-chat.svelte-wfhbxs.svelte-wfhbxs{padding:0.5rem 1rem;background:#3B82F6;color:white;border:none;border-radius:6px;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.3s ease}.new-chat.svelte-wfhbxs.svelte-wfhbxs:hover{background:#2563EB}.conversations.svelte-wfhbxs.svelte-wfhbxs{flex:1;overflow-y:auto}.empty-state.svelte-wfhbxs.svelte-wfhbxs{text-align:center;padding:3rem 1.5rem;color:#666}.empty-state.svelte-wfhbxs button.svelte-wfhbxs{margin-top:1rem;padding:0.5rem 1rem;background:rgba(59, 130, 246, 0.1);color:#3B82F6;border:1px solid #3B82F6;border-radius:6px;cursor:pointer;transition:all 0.3s ease}.empty-state.svelte-wfhbxs button.svelte-wfhbxs:hover{background:rgba(59, 130, 246, 0.2)}.conversation-item.svelte-wfhbxs.svelte-wfhbxs{width:100%;padding:1rem 1.5rem;background:transparent;border:none;border-bottom:1px solid rgba(255, 255, 255, 0.05);cursor:pointer;display:flex;align-items:center;gap:0.75rem;text-align:left;transition:all 0.3s ease;color:#fff}.conversation-item.svelte-wfhbxs.svelte-wfhbxs:hover{background:rgba(255, 255, 255, 0.05)}.conversation-item.active.svelte-wfhbxs.svelte-wfhbxs{background:rgba(59, 130, 246, 0.1)}.conversation-avatar.svelte-wfhbxs.svelte-wfhbxs{width:48px;height:48px;border-radius:50%;background:rgba(255, 255, 255, 0.1);display:flex;align-items:center;justify-content:center;font-size:1.5rem}.conversation-details.svelte-wfhbxs.svelte-wfhbxs{flex:1;min-width:0}.conversation-name.svelte-wfhbxs.svelte-wfhbxs{font-weight:600;margin-bottom:0.25rem}.conversation-preview.svelte-wfhbxs.svelte-wfhbxs{font-size:0.9rem;color:#888;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.conversation-time.svelte-wfhbxs.svelte-wfhbxs{font-size:0.8rem;color:#666}.chat-view.svelte-wfhbxs.svelte-wfhbxs{flex:1;display:flex;flex-direction:column}.chat-header.svelte-wfhbxs.svelte-wfhbxs{padding:1rem 1.5rem;border-bottom:1px solid rgba(255, 255, 255, 0.1);display:flex;align-items:center;justify-content:space-between;background:rgba(255, 255, 255, 0.02)}.chat-header.svelte-wfhbxs h3.svelte-wfhbxs{margin:0;font-size:1.1rem;color:#fff}.chat-actions.svelte-wfhbxs.svelte-wfhbxs{display:flex;gap:0.5rem}.messages-container.svelte-wfhbxs.svelte-wfhbxs{flex:1;overflow-y:auto;padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.empty-chat.svelte-wfhbxs.svelte-wfhbxs{text-align:center;margin:auto;color:#666}.empty-chat.svelte-wfhbxs p.svelte-wfhbxs:first-child{font-size:1.1rem;margin-bottom:0.5rem}.message.svelte-wfhbxs.svelte-wfhbxs{display:flex;flex-direction:column;max-width:70%}.message.sent.svelte-wfhbxs.svelte-wfhbxs{align-self:flex-end;align-items:flex-end}.message-bubble.svelte-wfhbxs.svelte-wfhbxs{padding:0.75rem 1rem;border-radius:12px;background:rgba(255, 255, 255, 0.1);color:#fff;word-wrap:break-word}.message.sent.svelte-wfhbxs .message-bubble.svelte-wfhbxs{background:#3B82F6}.message-time.svelte-wfhbxs.svelte-wfhbxs{font-size:0.75rem;color:#666;margin-top:0.25rem;padding:0 0.5rem}.message-input.svelte-wfhbxs.svelte-wfhbxs{padding:1rem 1.5rem;border-top:1px solid rgba(255, 255, 255, 0.1);display:flex;gap:1rem;background:rgba(255, 255, 255, 0.02)}.message-input.svelte-wfhbxs input.svelte-wfhbxs{flex:1;padding:0.75rem 1rem;background:rgba(255, 255, 255, 0.05);border:1px solid rgba(255, 255, 255, 0.1);border-radius:8px;color:#fff;font-size:1rem}.message-input.svelte-wfhbxs input.svelte-wfhbxs:focus{outline:none;border-color:#3B82F6;background:rgba(255, 255, 255, 0.08)}.message-input.svelte-wfhbxs button.svelte-wfhbxs{padding:0.75rem 1.5rem;background:#3B82F6;color:white;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s ease}.message-input.svelte-wfhbxs button.svelte-wfhbxs:hover:not(:disabled){background:#2563EB}.message-input.svelte-wfhbxs button.svelte-wfhbxs:disabled{opacity:0.5;cursor:not-allowed}.no-conversation.svelte-wfhbxs.svelte-wfhbxs{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#666;text-align:center;padding:2rem}.no-conversation.svelte-wfhbxs h2.svelte-wfhbxs{margin:0 0 0.5rem;color:#888}@media(max-width: 768px){.conversation-list.svelte-wfhbxs.svelte-wfhbxs{display:none}}",
  map: null
};
function formatTime(date) {
  return new Intl.DateTimeFormat(
    "en-US",
    {
      hour: "numeric",
      minute: "numeric",
      hour12: true
    }
  ).format(date);
}
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let $activeConversation, $$unsubscribe_activeConversation;
  let $vault, $$unsubscribe_vault;
  let $messages, $$unsubscribe_messages;
  let $activeMessages, $$unsubscribe_activeMessages;
  $$unsubscribe_activeConversation = subscribe(activeConversation, (value) => $activeConversation = value);
  $$unsubscribe_vault = subscribe(vault, (value) => $vault = value);
  $$unsubscribe_messages = subscribe(messages, (value) => $messages = value);
  $$unsubscribe_activeMessages = subscribe(activeMessages, (value) => $activeMessages = value);
  let messageInput = "";
  let passphrase = "";
  $$result.css.add(css);
  $$unsubscribe_activeConversation();
  $$unsubscribe_vault();
  $$unsubscribe_messages();
  $$unsubscribe_activeMessages();
  return `<div class="messages-layout svelte-wfhbxs">${!$vault.isUnlocked ? `<div class="unlock-container svelte-wfhbxs"><div class="unlock-card svelte-wfhbxs"><h2 class="svelte-wfhbxs" data-svelte-h="svelte-bt5f60">ğŸ” Unlock Your Vault</h2> <p class="svelte-wfhbxs" data-svelte-h="svelte-jhmsas">Enter your passphrase to decrypt your messages</p> <form><input type="password" placeholder="Enter passphrase" ${""} class="svelte-wfhbxs"${add_attribute("value", passphrase, 0)}> ${``} <button type="submit" ${""} class="svelte-wfhbxs">${escape("Unlock")}</button></form></div></div>` : `<div class="conversation-list svelte-wfhbxs"><div class="list-header svelte-wfhbxs"><h2 class="svelte-wfhbxs" data-svelte-h="svelte-ctbj3q">Messages</h2> <button class="new-chat svelte-wfhbxs" data-svelte-h="svelte-1cf5ts6">+ New Chat</button></div> <div class="conversations svelte-wfhbxs">${$messages.conversations.size === 0 ? `<div class="empty-state svelte-wfhbxs"><p data-svelte-h="svelte-jchknb">No conversations yet</p> <button class="svelte-wfhbxs" data-svelte-h="svelte-1h30l3q">Start a conversation</button></div>` : `${each([...$messages.conversations.values()], (conversation) => {
    return `<button class="${[
      "conversation-item svelte-wfhbxs",
      $activeConversation?.id === conversation.id ? "active" : ""
    ].join(" ").trim()}"><div class="conversation-avatar svelte-wfhbxs" data-svelte-h="svelte-reudcj">ğŸ’¬</div> <div class="conversation-details svelte-wfhbxs"><div class="conversation-name svelte-wfhbxs">${escape(conversation.metadata.name)}</div> <div class="conversation-preview svelte-wfhbxs">${escape(conversation.lastMessage ? conversation.lastMessage.content.text : "No messages yet")} </div></div> ${conversation.updatedAt ? `<div class="conversation-time svelte-wfhbxs">${escape(formatTime(conversation.updatedAt))} </div>` : ``} </button>`;
  })}`}</div></div> <div class="chat-view svelte-wfhbxs">${$activeConversation ? `<div class="chat-header svelte-wfhbxs"><h3 class="svelte-wfhbxs">${escape($activeConversation.metadata.name)}</h3> <div class="chat-actions svelte-wfhbxs" data-svelte-h="svelte-s4e3tr"><button class="icon-button" title="Call">ğŸ“</button> <button class="icon-button" title="Info">â„¹ï¸</button></div></div> <div class="messages-container svelte-wfhbxs">${$activeMessages.length === 0 ? `<div class="empty-chat svelte-wfhbxs" data-svelte-h="svelte-1bv9t29"><p class="svelte-wfhbxs">ğŸ”’ Messages are end-to-end encrypted</p> <p class="svelte-wfhbxs">Start a conversation</p></div>` : `${each($activeMessages, (message) => {
    return `<div class="${[
      "message svelte-wfhbxs",
      message.senderId === "current-user" ? "sent" : ""
    ].join(" ").trim()}"><div class="message-bubble svelte-wfhbxs">${escape(message.content.text)}</div> <div class="message-time svelte-wfhbxs">${escape(formatTime(message.timestamp))}</div> </div>`;
  })}`}</div> <form class="message-input svelte-wfhbxs"><input type="text" placeholder="Type a secure message..." class="svelte-wfhbxs"${add_attribute("value", messageInput, 0)}> <button type="submit" ${!messageInput.trim() ? "disabled" : ""} class="svelte-wfhbxs">Send</button></form>` : `<div class="no-conversation svelte-wfhbxs" data-svelte-h="svelte-1bwf5li"><h2 class="svelte-wfhbxs">Select a conversation</h2> <p>Choose a conversation from the list or start a new one</p></div>`}</div>`} </div>`;
});
export {
  Page as default
};
//# sourceMappingURL=_page.svelte.js.map
